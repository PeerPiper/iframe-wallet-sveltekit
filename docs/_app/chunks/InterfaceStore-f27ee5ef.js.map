{"version":3,"file":"InterfaceStore-f27ee5ef.js","sources":["../../../../../node_modules/mitt/dist/mitt.mjs","../../../../../src/lib/assets/logos/p.svg","../../../../../src/lib/store/InterfaceStore.js"],"sourcesContent":["export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","export default \"__VITE_ASSET__036ad820__\"","import { reactive } from './utils';\r\nimport { writable, derived, get } from 'svelte/store';\r\n\r\nimport mitt from 'mitt';\r\n\r\nimport logoArweaveBlack from '$lib/assets/logos/arweaveBlack.svg';\r\nimport logoArweave from '$lib/assets/logos/arweave.svg';\r\nimport peerpiper from '$lib/assets/logos/p.svg';\r\n\r\n// can be used in App with:\r\n// $get(interfaceStore).set('toolbar.enabled', false)\r\nexport const interfaceStore = reactive({\r\n\twindowWidth: window?.innerWidth,\r\n\twindowVisible: !document.hidden,\r\n\ttoolbar: {\r\n\t\tenabled: true,\r\n\t\tlinks: true\r\n\t},\r\n\tbreakpoints: {\r\n\t\tverticalLayout: window?.innerWidth < 600,\r\n\t\tverticalContent: window?.innerWidth < 1100\r\n\t},\r\n\tsticky: false,\r\n\tdragOverlay: false,\r\n\twallet: {\r\n\t\tsend: {\r\n\t\t\ttarget: '',\r\n\t\t\tquantity: '',\r\n\t\t\tdata: '',\r\n\t\t\ttags: []\r\n\t\t}\r\n\t}\r\n});\r\n\r\n// derived store, update if original store (above) changes\r\nexport const verticalLayout = derived(\r\n\tinterfaceStore,\r\n\t($interfaceStore) => $interfaceStore.breakpoints.verticalLayout\r\n);\r\n\r\nexport const verticalContent = derived(\r\n\tinterfaceStore,\r\n\t($interfaceStore) => $interfaceStore.breakpoints.verticalContent\r\n);\r\n\r\nexport const dragOverlay = derived(\r\n\tinterfaceStore,\r\n\t($interfaceStore) => $interfaceStore.dragOverlay\r\n);\r\n\r\nexport const emitter = mitt();\r\n\r\nemitter.once = (eventName, handler) => {\r\n\treturn new Promise((resolve) => {\r\n\t\tconst wrapper = (e) => {\r\n\t\t\temitter.off(eventName, wrapper);\r\n\t\t\tresolve(e);\r\n\t\t\tif (handler) {\r\n\t\t\t\thandler(e);\r\n\t\t\t}\r\n\t\t};\r\n\t\temitter.on(eventName, wrapper);\r\n\t});\r\n};\r\n\r\nfunction updateWindowSize() {\r\n\tget(interfaceStore).set('windowWidth', window?.innerWidth);\r\n\tget(interfaceStore).set('breakpoints.verticalLayout', window?.innerWidth < 600);\r\n\tget(interfaceStore).set('breakpoints.verticalContent', window?.innerWidth < 1100);\r\n}\r\nupdateWindowSize();\r\n\r\nwindow?.addEventListener('resize', updateWindowSize);\r\n\r\ndocument.addEventListener('visibilitychange', () =>\r\n\tget(interfaceStore).set('windowVisible', !document.hidden)\r\n);\r\n\r\nlet dragCount = 0;\r\ndocument.addEventListener(\r\n\t'dragenter',\r\n\t(e) => {\r\n\t\te.preventDefault();\r\n\t\tif (e.dataTransfer.types[0] == 'Files') {\r\n\t\t\tget(interfaceStore).set('dragOverlay', !!++dragCount);\r\n\t\t}\r\n\t},\r\n\ttrue\r\n);\r\ndocument.addEventListener(\r\n\t'dragleave',\r\n\t(e) => {\r\n\t\te.preventDefault();\r\n\t\tif (e.dataTransfer.types[0] == 'Files') {\r\n\t\t\tget(interfaceStore).set('dragOverlay', !!--dragCount);\r\n\t\t}\r\n\t},\r\n\ttrue\r\n);\r\ndocument.addEventListener(\r\n\t'dragend',\r\n\t(e) => {\r\n\t\te.preventDefault();\r\n\t\tdragCount = 0;\r\n\t\tget(interfaceStore).set('dragOverlay', false);\r\n\t},\r\n\ttrue\r\n);\r\ndocument.addEventListener(\r\n\t'dragover',\r\n\t(e) => {\r\n\t\te.preventDefault();\r\n\t},\r\n\ttrue\r\n);\r\ndocument.addEventListener(\r\n\t'drop',\r\n\t(e) => {\r\n\t\te.preventDefault();\r\n\t\tdragCount = 0;\r\n\t\tget(interfaceStore).set('dragOverlay', false);\r\n\t},\r\n\ttrue\r\n);\r\n\r\nif (navigator.appVersion.indexOf('Win') != -1) {\r\n\tdocument.documentElement.classList.add('styleScroll');\r\n}\r\n\r\nconst faviconEl = document.createElement('link');\r\nfaviconEl.setAttribute('rel', 'favicon icon');\r\n\r\nconst setFavicon = (e) => {\r\n\tfaviconEl.remove();\r\n\tif (e.matches) {\r\n\t\tfaviconEl.setAttribute('href', peerpiper);\r\n\t} else {\r\n\t\tfaviconEl.setAttribute('href', peerpiper);\r\n\t}\r\n\tdocument.head.appendChild(faviconEl);\r\n};\r\n\r\nif (window?.matchMedia) {\r\n\tconst matchTheme = window?.matchMedia('(prefers-color-scheme: light)');\r\n\tmatchTheme.addEventListener('change', setFavicon);\r\n\tsetFavicon(matchTheme);\r\n} else {\r\n\tsetFavicon({ matches: false });\r\n}\r\n"],"names":["get"],"mappings":";;AAAe,cAAS,GAAE;AAAC,SAAM,EAAC,KAAI,IAAE,KAAG,oBAAI,OAAI,IAAG,SAAS,GAAE,GAAE;AAAC,QAAI,IAAE,EAAE,IAAI,CAAC;AAAE,QAAE,EAAE,KAAK,CAAC,IAAE,EAAE,IAAI,GAAE,CAAC,CAAC,CAAC;AAAA,EAAC,GAAE,KAAI,SAAS,GAAE,GAAE;AAAC,QAAI,IAAE,EAAE,IAAI,CAAC;AAAE,SAAI,KAAE,EAAE,OAAO,EAAE,QAAQ,CAAC,MAAI,GAAE,CAAC,IAAE,EAAE,IAAI,GAAE,EAAE;AAAA,EAAE,GAAE,MAAK,SAAS,GAAE,GAAE;AAAC,QAAI,IAAE,EAAE,IAAI,CAAC;AAAE,SAAG,EAAE,QAAQ,IAAI,SAAS,IAAE;AAAC,SAAE,CAAC;AAAA,IAAC,CAAC,GAAG,KAAE,EAAE,IAAI,GAAG,MAAI,EAAE,MAAO,EAAC,IAAI,SAAS,IAAE;AAAC,SAAE,GAAE,CAAC;AAAA,IAAC,CAAC;AAAA,EAAC,EAAC;AAAC;ACAzT,IAAe,YAAA;ACWH,MAAC,iBAAiB,SAAS;AAAA,EACtC,aAAa,iCAAQ;AAAA,EACrB,eAAe,CAAC,SAAS;AAAA,EACzB,SAAS;AAAA,IACR,SAAS;AAAA,IACT,OAAO;AAAA,EACP;AAAA,EACD,aAAa;AAAA,IACZ,gBAAgB,kCAAQ,cAAa;AAAA,IACrC,iBAAiB,kCAAQ,cAAa;AAAA,EACtC;AAAA,EACD,QAAQ;AAAA,EACR,aAAa;AAAA,EACb,QAAQ;AAAA,IACP,MAAM;AAAA,MACL,QAAQ;AAAA,MACR,UAAU;AAAA,MACV,MAAM;AAAA,MACN,MAAM,CAAE;AAAA,IACR;AAAA,EACD;AACF,CAAC;AAGW,MAAC,iBAAiB,QAC7B,gBACA,CAAC,oBAAoB,gBAAgB,YAAY,cAClD;AAEY,MAAC,kBAAkB,QAC9B,gBACA,CAAC,oBAAoB,gBAAgB,YAAY,eAClD;AAEY,MAAC,cAAc,QAC1B,gBACA,CAAC,oBAAoB,gBAAgB,WACtC;AAEY,MAAC,UAAU,KAAO;AAE9B,QAAQ,OAAO,CAAC,WAAW,YAAY;AACtC,SAAO,IAAI,QAAQ,CAAC,YAAY;AAC/B,UAAM,UAAU,CAAC,MAAM;AACtB,cAAQ,IAAI,WAAW,OAAO;AAC9B,cAAQ,CAAC;AACT,UAAI,SAAS;AACZ,gBAAQ,CAAC;AAAA,MACT;AAAA,IACJ;AACE,YAAQ,GAAG,WAAW,OAAO;AAAA,EAC/B,CAAE;AACF;AAEA,4BAA4B;AAC3BA,kBAAI,cAAc,EAAE,IAAI,eAAe,iCAAQ,UAAU;AACzDA,kBAAI,cAAc,EAAE,IAAI,8BAA8B,kCAAQ,cAAa,GAAG;AAC9EA,kBAAI,cAAc,EAAE,IAAI,+BAA+B,kCAAQ,cAAa,IAAI;AACjF;AACA;AAEA,iCAAQ,iBAAiB,UAAU;AAEnC,SAAS,iBAAiB,oBAAoB,MAC7CA,gBAAI,cAAc,EAAE,IAAI,iBAAiB,CAAC,SAAS,MAAM,CAC1D;AAEA,IAAI,YAAY;AAChB,SAAS,iBACR,aACA,CAAC,MAAM;AACN,IAAE,eAAc;AAChB,MAAI,EAAE,aAAa,MAAM,MAAM,SAAS;AACvCA,oBAAI,cAAc,EAAE,IAAI,eAAe,CAAC,CAAC,EAAE,SAAS;AAAA,EACpD;AACD,GACD,IACD;AACA,SAAS,iBACR,aACA,CAAC,MAAM;AACN,IAAE,eAAc;AAChB,MAAI,EAAE,aAAa,MAAM,MAAM,SAAS;AACvCA,oBAAI,cAAc,EAAE,IAAI,eAAe,CAAC,CAAC,EAAE,SAAS;AAAA,EACpD;AACD,GACD,IACD;AACA,SAAS,iBACR,WACA,CAAC,MAAM;AACN,IAAE,eAAc;AAChB,cAAY;AACZA,kBAAI,cAAc,EAAE,IAAI,eAAe,KAAK;AAC5C,GACD,IACD;AACA,SAAS,iBACR,YACA,CAAC,MAAM;AACN,IAAE,eAAc;AAChB,GACD,IACD;AACA,SAAS,iBACR,QACA,CAAC,MAAM;AACN,IAAE,eAAc;AAChB,cAAY;AACZA,kBAAI,cAAc,EAAE,IAAI,eAAe,KAAK;AAC5C,GACD,IACD;AAEA,IAAI,UAAU,WAAW,QAAQ,KAAK,KAAK,IAAI;AAC9C,WAAS,gBAAgB,UAAU,IAAI,aAAa;AACrD;AAEA,MAAM,YAAY,SAAS,cAAc,MAAM;AAC/C,UAAU,aAAa,OAAO,cAAc;AAE5C,MAAM,aAAa,CAAC,MAAM;AACzB,YAAU,OAAM;AAChB,MAAI,EAAE,SAAS;AACd,cAAU,aAAa,QAAQ,SAAS;AAAA,EAC1C,OAAQ;AACN,cAAU,aAAa,QAAQ,SAAS;AAAA,EACxC;AACD,WAAS,KAAK,YAAY,SAAS;AACpC;AAEA,IAAI,iCAAQ,YAAY;AACvB,QAAM,aAAa,iCAAQ,WAAW;AACtC,aAAW,iBAAiB,UAAU,UAAU;AAChD,aAAW,UAAU;AACtB,OAAO;AACN,aAAW,EAAE,SAAS,MAAK,CAAE;AAC9B;;"}